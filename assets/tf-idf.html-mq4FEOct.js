import{_ as o,r as a,o as p,c as m,b as s,e as l,w as r,d as t,a as e}from"./app-VitiyI7N.js";const i={},u=s("h1",{id:"tf-idf",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#tf-idf","aria-hidden":"true"},"#"),t(" TF-IDF")],-1),d=e("<p>有一篇很长的文章，我要用计算机提取它的关键词（Automatic Keyphrase extraction），完全不加以人工干预，请问怎样才能正确做到？</p><p>这个问题涉及到数据挖掘、文本处理、信息检索等很多计算机前沿领域，但是出乎意料的是，有一个非常简单的经典算法，可以给出令人相当满意的结果。它简单到都不需要高等数学，普通人只用10分钟就可以理解，这就是我今天想要介绍的TF-IDF算法。</p><p>让我们从一个实例开始讲起。假定现在有一篇长文《中国的蜜蜂养殖》，我们准备用计算机提取它的关键词。</p><p>一个容易想到的思路，就是找到出现次数最多的词。如果某个词很重要，它应该在这篇文章中多次出现。于是，我们进行&quot;词频&quot;（Term Frequency，缩写为TF）统计。</p><p>结果你肯定猜到了，出现次数最多的词是----&quot;的&quot;、&quot;是&quot;、&quot;在&quot;----这一类最常用的词。它们叫做&quot;停用词&quot;（stop words），表示对找到结果毫无帮助、必须过滤掉的词。</p><p>假设我们把它们都过滤掉了，只考虑剩下的有实际意义的词。这样又会遇到了另一个问题，我们可能发现&quot;中国&quot;、&quot;蜜蜂&quot;、&quot;养殖&quot;这三个词的出现次数一样多。这是不是意味着，作为关键词，它们的重要性是一样的？</p><p>显然不是这样。因为&quot;中国&quot;是很常见的词，相对而言，&quot;蜜蜂&quot;和&quot;养殖&quot;不那么常见。如果这三个词在一篇文章的出现次数一样多，有理由认为，&quot;蜜蜂&quot;和&quot;养殖&quot;的重要程度要大于&quot;中国&quot;，也就是说，在关键词排序上面，&quot;蜜蜂&quot;和&quot;养殖&quot;应该排在&quot;中国&quot;的前面。</p><p>所以，我们需要一个重要性调整系数，衡量一个词是不是常见词。如果某个词比较少见，但是它在这篇文章中多次出现，那么它很可能就反映了这篇文章的特性，正是我们所需要的关键词。</p><p>用统计学语言表达，就是在词频的基础上，要对每个词分配一个&quot;重要性&quot;权重。最常见的词（&quot;的&quot;、&quot;是&quot;、&quot;在&quot;）给予最小的权重，较常见的词（&quot;中国&quot;）给予较小的权重，较少见的词（&quot;蜜蜂&quot;、&quot;养殖&quot;）给予较大的权重。这个权重叫做&quot;逆文档频率&quot;（Inverse Document Frequency，缩写为IDF），它的大小与一个词的常见程度成反比。</p><p>知道了&quot;词频&quot;（TF）和&quot;逆文档频率&quot;（IDF）以后，将这两个值相乘，就得到了一个词的TF-IDF值。某个词对文章的重要性越高，它的TF-IDF值就越大。所以，排在最前面的几个词，就是这篇文章的关键词。</p><p>下面就是这个算法的细节。</p><p>第一步，计算词频。</p>",12),h=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"词频(TF)"),s("mo",null,"="),s("mtext",null,"某个词在文章中出现的次数")]),s("annotation",{encoding:"application/x-tex"}," \\text{词频(TF)}=\\text{某个词在文章中出现的次数} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"词频"),s("span",{class:"mord"},"(TF)")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"某个词在文章中出现的次数")])])])])])],-1),x=s("p",null,'考虑到文章有长短之分，为了便于不同文章的比较，进行"词频"标准化。',-1),g=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"词频(TF)"),s("mo",null,"="),s("mfrac",null,[s("mtext",null,"某个词在文章中出现的次数"),s("mtext",null,"文章的总词数")])]),s("annotation",{encoding:"application/x-tex"}," \\text{词频(TF)}=\\frac{\\text{某个词在文章中出现的次数}}{\\text{文章的总词数}} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"词频"),s("span",{class:"mord"},"(TF)")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.0463em","vertical-align":"-0.686em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"文章的总词数")])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"某个词在文章中出现的次数")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),q=s("p",null,"或者",-1),k=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"词频(TF)"),s("mo",null,"="),s("mfrac",null,[s("mtext",null,"某个词在文章中出现的次数"),s("mtext",null,"该文出现次数最多的词的出现次数")])]),s("annotation",{encoding:"application/x-tex"}," \\text{词频(TF)}=\\frac{\\text{某个词在文章中出现的次数}}{\\text{该文出现次数最多的词的出现次数}} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"词频"),s("span",{class:"mord"},"(TF)")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.0463em","vertical-align":"-0.686em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"该文出现次数最多的词的出现次数")])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"某个词在文章中出现的次数")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.686em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),y=s("p",null,"第二步，计算逆文档频率。",-1),F=s("p",null,"这时，需要一个语料库（corpus），用来模拟语言的使用环境。",-1),_=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"逆文档频率(IDF)"),s("mo",null,"="),s("mtext",null,"log"),s("mrow",null,[s("mo",{fence:"true"},"("),s("mfrac",null,[s("mtext",null,"语料库的文档总数"),s("mrow",null,[s("mtext",null,"包含该词的文档数"),s("mo",null,"+"),s("mn",null,"1")])]),s("mo",{fence:"true"},")")])]),s("annotation",{encoding:"application/x-tex"}," \\text{逆文档频率(IDF)}=\\text{log}\\left(\\frac{\\text{语料库的文档总数}}{\\text{包含该词的文档数}+1}\\right) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"逆文档频率"),s("span",{class:"mord"},"(IDF)")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4em","vertical-align":"-0.95em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"log")]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},"(")]),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"包含该词的文档数")]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"1")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"语料库的文档总数")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7693em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size3"},")")])])])])])])],-1),b=s("p",null,[t("如果一个词越常见，那么分母就越大，逆文档频率就越小越接近0。分母之所以要加1，是为了避免分母为0（即所有文档都不包含该词）。"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"log")]),s("annotation",{encoding:"application/x-tex"},"\\text{log}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"log")])])])]),t("表示对得到的值取对数。")],-1),f=s("p",null,"第三步，计算TF-IDF。",-1),w=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"TF-IDF"),s("mo",null,"="),s("mtext",null,"词频(TF)"),s("mo",null,"×"),s("mtext",null,"逆文档频率(IDF)")]),s("annotation",{encoding:"application/x-tex"}," \\text{TF-IDF}=\\text{词频(TF)}\\times \\text{逆文档频率(IDF)} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"TF-IDF")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"词频"),s("span",{class:"mord"},"(TF)")]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"×"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord text"},[s("span",{class:"mord cjk_fallback"},"逆文档频率"),s("span",{class:"mord"},"(IDF)")])])])])])],-1),T=e('<p>可以看到，TF-IDF与一个词在文档中的出现次数成正比，与该词在整个语言中的出现次数成反比。所以，自动提取关键词的算法就很清楚了，就是计算出文档的每个词的TF-IDF值，然后按降序排列，取排在最前面的几个词。</p><p>还是以《中国的蜜蜂养殖》为例，假定该文长度为1000个词，&quot;中国&quot;、&quot;蜜蜂&quot;、&quot;养殖&quot;各出现20次，则这三个词的&quot;词频&quot;（TF）都为0.02。然后，搜索Google发现，包含&quot;的&quot;字的网页共有250亿张，假定这就是中文网页总数。包含&quot;中国&quot;的网页共有62.3亿张，包含&quot;蜜蜂&quot;的网页为0.484亿张，包含&quot;养殖&quot;的网页为0.973亿张。则它们的逆文档频率（IDF）和TF-IDF如下：</p><table><thead><tr><th></th><th>包含该词的文档数（亿）</th><th>IDF</th><th>TF-IDF</th></tr></thead><tbody><tr><td>中国</td><td>62.3</td><td>0.603</td><td>0.0121</td></tr><tr><td>蜜蜂</td><td>0.484</td><td>2.713</td><td>0.0543</td></tr><tr><td>养殖</td><td>0.973</td><td>2.410</td><td>0.0482</td></tr></tbody></table><p>从上表可见，&quot;蜜蜂&quot;的TF-IDF值最高，&quot;养殖&quot;其次，&quot;中国&quot;最低。（如果还计算&quot;的&quot;字的TF-IDF，那将是一个极其接近0的值。）所以，如果只选择一个词，&quot;蜜蜂&quot;就是这篇文章的关键词。</p><p>除了自动提取关键词，TF-IDF算法还可以用于许多别的地方。比如，信息检索时，对于每个文档，都可以分别计算一组搜索词（&quot;中国&quot;、&quot;蜜蜂&quot;、&quot;养殖&quot;）的TF-IDF，将它们相加，就可以得到整个文档的TF-IDF。这个值最高的文档就是与搜索词最相关的文档。</p><p>TF-IDF算法的优点是简单快速，结果比较符合实际情况。缺点是，单纯以&quot;词频&quot;衡量一个词的重要性，不够全面，有时重要的词可能出现次数并不多。而且，这种算法无法体现词的位置信息，出现位置靠前的词与出现位置靠后的词，都被视为重要性相同，这是不正确的。（一种解决方法是，对全文的第一段和每一段的第一句话，给予较大的权重。）</p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h1>',7),v={href:"https://mp.weixin.qq.com/s?__biz=MzA5Nzk4MDUyMw%3D%3D&mid=2650727733&idx=1&sn=b27ccf95a1df7d2f178a3bdf7ca8bfbe&scene=45#wechat_redirect",target:"_blank",rel:"noopener noreferrer"};function D(I,M){const n=a("RouterLink"),c=a("ExternalLinkIcon");return p(),m("div",null,[u,s("ul",null,[s("li",null,[l(n,{to:"/docs/machine-learning/natural-language-processing/natural-language-processing.html"},{default:r(()=>[t("返回上层目录")]),_:1})])]),d,h,x,g,q,k,y,F,_,b,f,w,T,s("ul",null,[s("li",null,[s("a",v,[t("搜索引擎自动提取关键词技术《TF-IDF与余弦相似性的应用》"),l(c)])])])])}const L=o(i,[["render",D],["__file","tf-idf.html.vue"]]);export{L as default};
